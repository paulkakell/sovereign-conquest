<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sovereign Conquest</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="wrap">
    <header class="mast">
      <h1>Sovereign Conquest</h1>
      <p class="muted">A lightweight space trading and conquest game.</p>
    </header>

    <section id="auth" class="card">
      <div class="tabs">
        <button id="tabLogin" class="tab active">Login</button>
        <button id="tabRegister" class="tab">Register</button>
      </div>

      <div id="loginPanel">
        <h2>Login</h2>
        <form id="loginForm" class="form">
          <label>Username
            <input id="loginUser" autocomplete="username" required />
          </label>
          <label>Password
            <input id="loginPass" type="password" autocomplete="current-password" required />
          </label>
          <button type="submit">Login</button>
        </form>
      </div>

      <div id="registerPanel" style="display:none">
        <h2>Register</h2>
        <form id="registerForm" class="form">
          <label>Username
            <input id="regUser" autocomplete="username" required />
          </label>
          <label>Password
            <input id="regPass" type="password" autocomplete="new-password" required />
          </label>
          <button type="submit">Create Account</button>
        </form>
      </div>

      <div id="pwChangePanel" style="display:none">
        <h2>Change Password</h2>
        <form id="pwChangeForm" class="form">
          <label>Old Password
            <input id="oldPass" type="password" autocomplete="current-password" required />
          </label>
          <label>New Password
            <input id="newPass" type="password" autocomplete="new-password" required />
          </label>
          <button type="submit">Update Password</button>
        </form>
      </div>

      <div id="authMsg" class="msg"></div>
    </section>

    <section id="game" style="display:none">
      <header class="topbar" id="topbar" style="display:none">
        <div class="topbar-row">
          <div class="kv"><span class="k">Pilot</span><span class="v" id="pilotName"></span></div>
          <div class="kv"><span class="k">Rank</span><span class="v" id="rankName"></span></div>
          <div class="kv"><span class="k">XP</span><span class="v" id="xpValue"></span></div>
          <div class="kv"><span class="k">Corp</span><span class="v" id="corpName"></span></div>
          <div class="kv"><span class="k">Season</span><span class="v" id="seasonName"></span></div>
          <div class="kv"><span class="k">Sector</span><span class="v" id="sectorName"></span></div>
          <div class="kv"><span class="k">Credits</span><span class="v" id="credits"></span></div>
          <div class="kv"><span class="k">Turns</span><span class="v" id="turns"></span></div>
          <div class="kv"><span class="k">Cargo</span><span class="v" id="cargo"></span></div>
          <div class="kv"><span class="k">Cap</span><span class="v" id="cargoCap"></span></div>

          <button class="ghost" id="messagesNavBtn" title="Messages">
            ðŸ”” Messages <span id="msgBadge" class="badge" style="display:none">0</span>
          </button>
          <button class="ghost" id="adminMapBtn" title="Admin universe map" style="display:none">ðŸ—º Map</button>
          <button class="ghost" id="refreshBtn" title="Refresh State">Refresh</button>
          <button class="ghost" id="logoutBtn">Logout</button>
        </div>
      </header>

      <div id="pageGame">
        <div class="grid2">
          <section class="card" id="status">
            <h2>Status</h2>
            <div class="cols">
              <div>
                <div><span class="muted">Discovered:</span> <span id="discCount">0</span></div>
                <div><span class="muted">Players:</span> <span id="playerCount">0</span></div>
                <div><span class="muted">Your Corp:</span> <span id="corpInfo">-</span></div>
              </div>
              <div>
                <div><span class="muted">Planet:</span> <span id="planetInfo">-</span></div>
              </div>
            </div>
          </section>

          <section class="card" id="sector">
            <h2>Sector</h2>
            <div id="sectorDetails" class="pre"></div>
          </section>

          <section class="card" id="port">
            <h2>Port</h2>
            <div id="portDetails" class="pre"></div>
          </section>

          <section class="card" id="event">
            <h2>Event</h2>
            <div id="eventDetails" class="pre"></div>
          </section>

          <section class="card" id="activity">
            <h2>Activity</h2>
            <div id="log" class="log"></div>
          </section>
        </div>

        <div class="card cmd">
          <h2>Command</h2>
          <div class="cmdline">
            <input id="commandInput" placeholder="SCAN | MOVE 2 | TRADE BUY ORE 10 | PLANET INFO | MINE DEPLOY 10 | SHIPYARD" />
            <button id="sendCmdBtn">Send</button>
          </div>
          <div id="cmdMsg" class="msg"></div>
          <details class="help">
            <summary>Help</summary>
            <div id="helpText" class="pre"></div>
          </details>
        </div>
      </div>

      <div id="pageMessages" style="display:none">
        <section class="card" id="messagesPageCard">
          <h2>Messages</h2>
          <p class="muted">Direct messages between players. Unread messages appear highlighted.</p>

          <div class="tabs">
            <button id="inboxTabBtn" class="tab active">Inbox</button>
            <button id="sentTabBtn" class="tab">Sent</button>
          </div>

          <div id="inboxPanel">
            <div class="inline">
              <button id="refreshInboxBtn">Refresh Inbox</button>
            </div>
            <div id="dmInbox" class="msglist"></div>
          </div>

          <div id="sentPanel" style="display:none">
            <div class="inline">
              <button id="refreshSentBtn">Refresh Sent</button>
            </div>
            <div id="dmSent" class="msglist"></div>
          </div>

          <hr />

          <h3>Compose</h3>
          <div id="replyContext" class="muted" style="display:none"></div>
          <div class="inline" id="replyActions" style="display:none">
            <button class="ghost" id="cancelReplyBtn">Cancel Reply</button>
          </div>

          <form id="sendMsgForm" class="form">
            <input type="hidden" id="relatedMessageId" />
            <label>To
              <input id="msgTo" placeholder="username" required />
            </label>
            <label>Subject
              <input id="msgSubject" placeholder="subject" />
            </label>
            <label>Body
              <textarea id="msgBody" rows="4" placeholder="message" required></textarea>
            </label>
            <label>Attachment (optional)
              <input id="msgAttachment" type="file" />
            </label>
            <button type="submit">Send Message</button>
          </form>
          <div id="msgSendStatus" class="msg"></div>
        </section>
      </div>

      <div id="pageAdminMap" style="display:none">
        <section class="card" id="adminMapCard">
          <h2>Universe Map</h2>
          <p class="muted">Admin-only ASCII overview of sectors, spaceports, planets, ownership, and player locations.</p>
          <div class="inline">
            <button id="refreshAdminMapBtn">Refresh Map</button>
          </div>
          <pre id="adminMapPre" class="ansi-map"></pre>
          <div id="adminMapMsg" class="msg"></div>
        </section>
      </div>
    </section>

    <footer class="foot muted">
      <small>v<span id="ver"></span></small>
    </footer>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
